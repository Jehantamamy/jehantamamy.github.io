!function(){let e=window.location.hostname;if("localhost"===e||"127.0.0.1"===e||""===e){"file:"===window.location.protocol&&t();return}function t(){throw document.body.innerHTML=`
				<div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; background:#0f172a; color:white; font-family:sans-serif; text-align:center;">
					<h1 style="font-size:3rem; color:#ef4444;">⛔ AKSES DITOLAK</h1>
					<p style="font-size:1.2rem; margin-top:1rem;">Aplikasi ini dilindungi Hak Cipta dan hanya dapat digunakan melalui website resmi.</p>
					<a href="https://ariestechlab.com" style="margin-top:2rem; padding:10px 20px; background:#10b981; color:white; text-decoration:none; border-radius:8px; font-weight:bold;">Buka Aries Tech Labs</a>
				</div>
			`,Error("Illegal execution environment detected.")}["ariestechlab.com","www.ariestechlab.com"].includes(e)||t()}(),pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";let currentFile=null,pdfDoc=null,selectedFormat="jpg",selectedScale=2;const step1=document.getElementById("step-1"),step2=document.getElementById("step-2"),fileInput=document.getElementById("file-input"),dropZone=document.getElementById("drop-zone"),filenameEl=document.getElementById("filename"),pageCountEl=document.getElementById("page-count"),convertBtn=document.getElementById("convert-btn"),progressContainer=document.getElementById("progress-container"),progressBar=document.getElementById("progress-bar"),progressText=document.getElementById("progress-text"),progressPercent=document.getElementById("progress-percent");async function handleFile(e){if("application/pdf"!==e.type){alert("Please upload a valid PDF file.");return}currentFile=e;try{let t=await e.arrayBuffer();pdfDoc=await pdfjsLib.getDocument(t).promise,filenameEl.innerText=e.name,pageCountEl.innerText=pdfDoc.numPages,step1.classList.add("hidden"),step2.classList.remove("hidden"),step2.classList.add("flex")}catch(r){console.error(r),alert("Error reading PDF. Password protected files are not supported.")}}function selectFormat(e){selectedFormat=e,document.querySelectorAll(".option-card").forEach(e=>{e.id.includes("opt-")&&e.classList.remove("selected")}),document.getElementById(`opt-${e}`).classList.add("selected")}function selectDPI(e){selectedScale=e,document.querySelectorAll(".option-card").forEach(e=>{e.id.includes("dpi-")&&e.classList.remove("selected")}),document.getElementById(`dpi-${e}`).classList.add("selected")}async function startConversion(){if(!pdfDoc)return;convertBtn.disabled=!0,convertBtn.classList.add("opacity-50","cursor-not-allowed"),convertBtn.innerHTML=`<span>⏳</span> CONVERTING...`,progressContainer.classList.remove("hidden");let e=new JSZip,t=e.folder("converted_images"),r=pdfDoc.numPages;try{for(let n=1;n<=r;n++){let a=Math.round((n-1)/r*100);updateProgress(a,`Rendering Page ${n} of ${r}...`);let o=await pdfDoc.getPage(n),s=o.getViewport({scale:selectedScale}),l=document.createElement("canvas"),i=l.getContext("2d");l.height=s.height,l.width=s.width,await o.render({canvasContext:i,viewport:s}).promise;let d=await new Promise(e=>{let t="jpg"===selectedFormat?"image/jpeg":"image/png";l.toBlob(e,t,.85)}),c="jpg"===selectedFormat?"jpg":"png",p=`page_${String(n).padStart(2,"0")}.${c}`;t.file(p,d)}updateProgress(100,"Zipping files...");let g=await e.generateAsync({type:"blob"}),m=currentFile.name.replace(".pdf","")+"_Images.zip";saveAs(g,m),setTimeout(()=>{alert("Conversion Complete! Your download should start automatically."),convertBtn.disabled=!1,convertBtn.classList.remove("opacity-50","cursor-not-allowed"),convertBtn.innerHTML=`<span>⚡</span> CONVERT AGAIN`,progressContainer.classList.add("hidden")},1e3)}catch(f){console.error(f),alert("An error occurred during conversion."),convertBtn.disabled=!1,convertBtn.classList.remove("opacity-50","cursor-not-allowed"),convertBtn.innerHTML=`<span>⚡</span> TRY AGAIN`}}function updateProgress(e,t){progressBar.style.width=`${e}%`,progressPercent.innerText=`${e}%`,progressText.innerText=t}function resetApp(){currentFile=null,pdfDoc=null,step2.classList.add("hidden"),step2.classList.remove("flex"),step1.classList.remove("hidden"),fileInput.value="",progressContainer.classList.add("hidden"),progressBar.style.width="0%"}["dragenter","dragover","dragleave","drop"].forEach(e=>{dropZone.addEventListener(e,e=>{e.preventDefault(),e.stopPropagation()},!1)}),dropZone.addEventListener("dragover",()=>dropZone.classList.add("border-amber-500","bg-slate-800")),dropZone.addEventListener("dragleave",()=>dropZone.classList.remove("border-amber-500","bg-slate-800")),dropZone.addEventListener("drop",e=>{dropZone.classList.remove("border-amber-500","bg-slate-800"),e.dataTransfer.files.length&&handleFile(e.dataTransfer.files[0])}),fileInput.addEventListener("change",e=>{e.target.files.length&&handleFile(e.target.files[0])}),document.addEventListener("DOMContentLoaded",()=>{initSessionManager()});
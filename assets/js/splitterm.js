!function(){let e=window.location.hostname;if("localhost"===e||"127.0.0.1"===e||""===e){"file:"===window.location.protocol&&t();return}function t(){throw document.body.innerHTML=`
				<div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; background:#0f172a; color:white; font-family:sans-serif; text-align:center;">
					<h1 style="font-size:3rem; color:#ef4444;">â›” AKSES DITOLAK</h1>
					<p style="font-size:1.2rem; margin-top:1rem;">Aplikasi ini dilindungi Hak Cipta dan hanya dapat digunakan melalui website resmi.</p>
					<a href="https://ariestechlab.com" style="margin-top:2rem; padding:10px 20px; background:#10b981; color:white; text-decoration:none; border-radius:8px; font-weight:bold;">Buka Aries Tech Labs</a>
				</div>
			`,Error("Illegal execution environment detected.")}["ariestechlab.com","www.ariestechlab.com"].includes(e)||t()}(),pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";let currentFile=null,pdfDocInfo=null,selectedPages=new Set,totalPages=0;const uploadSection=document.getElementById("upload-section"),editorSection=document.getElementById("editor-section"),pageGrid=document.getElementById("page-grid"),loadingOverlay=document.getElementById("loading"),loadingText=document.getElementById("loading-text"),selectedCountEl=document.getElementById("selected-count"),filenameDisplay=document.getElementById("filename-display"),dropZone=document.getElementById("drop-zone"),fileInput=document.getElementById("file-input");async function handleFile(e){if("application/pdf"!==e.type){alert("Please upload a valid PDF file.");return}currentFile=e,filenameDisplay.innerText=e.name,loadingOverlay.classList.remove("hidden"),loadingText.innerText="Reading Document...";try{let t=await e.arrayBuffer(),a=pdfjsLib.getDocument(t);totalPages=(pdfDocInfo=await a.promise).numPages,document.getElementById("page-count").innerText=totalPages,await renderGrid(),uploadSection.classList.add("hidden"),editorSection.classList.remove("hidden"),editorSection.classList.add("flex")}catch(l){console.error(l),alert("Error reading PDF. Password protected files are not supported yet.")}finally{loadingOverlay.classList.add("hidden")}}async function renderGrid(){pageGrid.innerHTML="",selectedPages.clear(),updateCount(),loadingText.innerText=`Rendering ${totalPages} Pages...`;for(let e=1;e<=totalPages;e++){let t=document.createElement("div");t.className="page-card relative bg-slate-800 rounded-lg p-2 border-2 border-transparent hover:border-slate-500 cursor-pointer transition-all group",t.setAttribute("data-page",e),t.onclick=()=>togglePage(e,t);let a=document.createElement("canvas");a.className="w-full h-auto rounded shadow-sm opacity-80 group-hover:opacity-100 transition-opacity";let l=a.getContext("2d"),r=await pdfDocInfo.getPage(e),n=r.getViewport({scale:.5});a.height=n.height,a.width=n.width;let i={canvasContext:l,viewport:n};await r.render(i).promise;let o=document.createElement("div");o.className="check-circle absolute top-3 right-3 w-6 h-6 rounded-full border-2 border-slate-400 bg-slate-900 flex items-center justify-center transition-all z-10",o.innerHTML='<svg class="w-4 h-4 text-white opacity-0 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>';let d=document.createElement("div");d.className="absolute bottom-1 left-0 right-0 text-center text-[10px] text-slate-400 font-mono",d.innerText=`Page ${e}`,t.appendChild(a),t.appendChild(o),t.appendChild(d),pageGrid.appendChild(t)}}function togglePage(e,t){selectedPages.has(e)?(selectedPages.delete(e),t.classList.remove("selected"),t.querySelector(".check-circle svg").classList.add("opacity-0")):(selectedPages.add(e),t.classList.add("selected"),t.querySelector(".check-circle svg").classList.remove("opacity-0")),updateCount()}function updateCount(){selectedCountEl.innerText=selectedPages.size}function selectAll(){let e=document.querySelectorAll(".page-card");selectedPages.clear(),e.forEach(e=>{let t=parseInt(e.getAttribute("data-page"));selectedPages.add(t),e.classList.add("selected"),e.querySelector(".check-circle svg").classList.remove("opacity-0")}),updateCount()}function deselectAll(){let e=document.querySelectorAll(".page-card");selectedPages.clear(),e.forEach(e=>{e.classList.remove("selected"),e.querySelector(".check-circle svg").classList.add("opacity-0")}),updateCount()}async function processPDF(e){if(0===selectedPages.size){alert("Please select at least 1 page.");return}loadingOverlay.classList.remove("hidden"),loadingText.innerText="Processing File...";try{let{PDFDocument:t}=PDFLib,a=await currentFile.arrayBuffer(),l=await t.load(a),r=await t.create(),n=[],i=l.getPageCount();for(let o=0;o<i;o++){let d=o+1,s=selectedPages.has(d);"extract"===e?s&&n.push(o):"delete"!==e||s||n.push(o)}if(0===n.length){alert("Operation resulted in an empty PDF."),loadingOverlay.classList.add("hidden");return}let c=await r.copyPages(l,n);c.forEach(e=>r.addPage(e));let g=await r.save(),p=currentFile.name.replace(".pdf",""),u=`${p}_${"extract"===e?"Extracted":"Remaining"}.pdf`;download(g,u,"application/pdf")}catch(f){console.error(f),alert("An error occurred while processing the PDF.")}finally{loadingOverlay.classList.add("hidden")}}function resetApp(){confirm("Close current file?")&&(currentFile=null,selectedPages.clear(),uploadSection.classList.remove("hidden"),editorSection.classList.add("hidden"),fileInput.value="")}["dragenter","dragover","dragleave","drop"].forEach(e=>{dropZone.addEventListener(e,e=>{e.preventDefault(),e.stopPropagation()},!1)}),dropZone.addEventListener("dragover",()=>dropZone.classList.add("border-rose-500","bg-slate-800")),dropZone.addEventListener("dragleave",()=>dropZone.classList.remove("border-rose-500","bg-slate-800")),dropZone.addEventListener("drop",e=>{dropZone.classList.remove("border-rose-500","bg-slate-800");let t=e.dataTransfer.files;t.length&&handleFile(t[0])}),fileInput.addEventListener("change",e=>{e.target.files.length&&handleFile(e.target.files[0])}),document.addEventListener("DOMContentLoaded",()=>{initSessionManager()});
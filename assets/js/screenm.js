!function(){let e=window.location.hostname;if("localhost"===e||"127.0.0.1"===e||""===e){"file:"===window.location.protocol&&t();return}function t(){throw document.body.innerHTML=`
				<div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; background:#0f172a; color:white; font-family:sans-serif; text-align:center;">
					<h1 style="font-size:3rem; color:#ef4444;">â›” AKSES DITOLAK</h1>
					<p style="font-size:1.2rem; margin-top:1rem;">Aplikasi ini dilindungi Hak Cipta dan hanya dapat digunakan melalui website resmi.</p>
					<a href="https://ariestechlab.com" style="margin-top:2rem; padding:10px 20px; background:#10b981; color:white; text-decoration:none; border-radius:8px; font-weight:bold;">Buka Aries Tech Labs</a>
				</div>
			`,Error("Illegal execution environment detected.")}["ariestechlab.com","www.ariestechlab.com"].includes(e)||t()}();let mediaRecorder,recordedChunks=[],timerInterval,seconds=0,currentFps=30;const preview=document.getElementById("preview-video"),startBtn=document.getElementById("start-btn"),stopBtn=document.getElementById("stop-btn"),downloadBtn=document.getElementById("download-btn"),emptyState=document.getElementById("empty-state"),timerDisplay=document.getElementById("timer"),timeVal=document.getElementById("time-val"),statusBadge=document.getElementById("status-badge");function setFps(e){currentFps=e,document.getElementById("fps-30").className=30===e?"flex-1 py-1.5 rounded text-xs font-bold bg-slate-700 text-white transition-all":"flex-1 py-1.5 rounded text-xs font-bold text-slate-500 hover:text-white transition-all",document.getElementById("fps-60").className=60===e?"flex-1 py-1.5 rounded text-xs font-bold bg-slate-700 text-white transition-all":"flex-1 py-1.5 rounded text-xs font-bold text-slate-500 hover:text-white transition-all"}async function startRecording(){try{let e=document.getElementById("quality-select").value,t=document.getElementById("mic-toggle").checked,a,i,n;"lowest"===e?(a=854,i=480,n=5e5):"low"===e?(a=1280,i=720,n=1e6):"high"===e?(a=1920,i=1080,n=25e5):(a=3840,i=2160,n=5e6);let s={video:{cursor:"always",width:{ideal:a},height:{ideal:i},frameRate:{ideal:currentFps}},audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}},d=await navigator.mediaDevices.getDisplayMedia(s),o=d;if(t){let r=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0}}),l=new AudioContext,c=l.createMediaStreamDestination();if(d.getAudioTracks().length>0){let m=l.createMediaStreamSource(d);m.connect(c)}let p=l.createMediaStreamSource(r);p.connect(c),o=new MediaStream([...d.getVideoTracks(),...c.stream.getAudioTracks()])}let $={mimeType:"video/webm; codecs=vp9",bitsPerSecond:n};MediaRecorder.isTypeSupported($.mimeType)||delete $.mimeType,(mediaRecorder=new MediaRecorder(o,$)).ondataavailable=e=>{e.data.size>0&&recordedChunks.push(e.data)},mediaRecorder.onstop=exportVideo,d.getVideoTracks()[0].onended=()=>stopRecording(),mediaRecorder.start(),preview.srcObject=o,emptyState.classList.add("hidden"),startBtn.classList.add("hidden"),stopBtn.classList.remove("hidden"),downloadBtn.classList.add("hidden"),timerDisplay.classList.remove("hidden"),statusBadge.innerText=`REC: ${e.toUpperCase()} @ ${currentFps}FPS`,statusBadge.classList.replace("bg-slate-800","bg-rose-900"),statusBadge.classList.add("text-white","animate-pulse"),preview.parentElement.classList.add("recording-active"),startTimer()}catch(g){console.error(g),"NotAllowedError"!==g.name&&alert("Gagal merekam: "+g.message)}}function stopRecording(){mediaRecorder&&"inactive"!==mediaRecorder.state&&(mediaRecorder.stop(),preview.srcObject.getTracks().forEach(e=>e.stop())),stopTimer(),startBtn.classList.remove("hidden"),startBtn.innerHTML='<div class="w-3 h-3 bg-white rounded-full"></div> REKAM LAGI',stopBtn.classList.add("hidden"),timerDisplay.classList.add("hidden"),statusBadge.innerText="RECORDING SAVED",statusBadge.classList.replace("bg-rose-900","bg-emerald-900"),statusBadge.classList.remove("animate-pulse"),preview.parentElement.classList.remove("recording-active")}function exportVideo(){let e=new Blob(recordedChunks,{type:"video/webm"}),t=URL.createObjectURL(e);preview.srcObject=null,preview.src=t,preview.controls=!0,preview.play();let a=formatBytes(e.size);downloadBtn.innerText=`DOWNLOAD VIDEO (${a})`,downloadBtn.href=t,downloadBtn.download=`Capture_${Date.now()}.webm`,downloadBtn.classList.remove("hidden"),recordedChunks=[]}function startTimer(){seconds=0,timerInterval=setInterval(()=>{seconds++;let e=Math.floor(seconds/60).toString().padStart(2,"0"),t=(seconds%60).toString().padStart(2,"0");timeVal.innerText=`${e}:${t}`},1e3)}function stopTimer(){clearInterval(timerInterval)}function formatBytes(e){if(!+e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,t)).toFixed(1))} ${["Bytes","KB","MB","GB"][t]}`}document.addEventListener("DOMContentLoaded",()=>{navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia||(document.getElementById("mobile-warning").classList.remove("hidden"),document.getElementById("control-panel").classList.add("opacity-50","pointer-events-none"),statusBadge.innerText="DEVICE NOT SUPPORTED")}),document.addEventListener("DOMContentLoaded",()=>{initSessionManager()});
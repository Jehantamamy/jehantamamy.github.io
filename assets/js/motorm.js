function updateSim(){let e=parseFloat(document.getElementById("base-rpm").value)||0,t=parseFloat(document.getElementById("stall-torque").value)||0;document.getElementById("disp-base").innerText=e,document.getElementById("disp-stall").innerText=t;let n=parseFloat(document.getElementById("load-kg").value),l=parseFloat(document.getElementById("radius-cm").value),a=parseInt(document.getElementById("gear-ratio").value),r=parseInt(document.getElementById("efficiency").value)/100;document.getElementById("load-val").innerText=n+" Kg",document.getElementById("radius-val").innerText=l+" cm",document.getElementById("gear-val").innerText="1:"+a,document.getElementById("eff-val").innerText=100*r+"%",document.getElementById("box-label").innerText=n+"kg";let s=n*l,d=s/(a*r)/t,i=0;i=d>=1?0:e*(1-d);let o=i/a;document.getElementById("req-torque").innerText=s.toFixed(1),document.getElementById("sys-torque").innerText=(t*a*r).toFixed(1),document.getElementById("rpm-out").innerText=Math.floor(o);let $=document.getElementById("pulley-disc"),m=document.getElementById("rope"),p=document.getElementById("status-badge"),y=document.getElementById("speed-cat");if(o>0){let g=60/o;g<.05&&(g=.05),$.style.animation=`spin ${g}s linear infinite`,$.style.borderColor="#334155",m.className="rope-tension",p.innerText="System: Running",p.className="text-[10px] bg-emerald-500/10 border border-emerald-500/20 px-2 py-1 rounded text-emerald-500 font-mono uppercase",o>500?y.innerHTML="<span class='text-sky-400'>⚡ SUPER FAST</span>":o>100?y.innerHTML="<span class='text-emerald-400'>\uD83D\uDE80 FAST</span>":y.innerHTML="<span class='text-amber-400'>\uD83D\uDC22 SLOW (TORQUE)</span>"}else $.style.animation="none",$.style.borderColor="#ef4444",m.className="rope-slack",p.innerText="MOTOR STALLED",p.className="text-[10px] bg-rose-500/10 border border-rose-500/20 px-2 py-1 rounded text-rose-500 font-mono uppercase blink",y.innerHTML="<span class='text-rose-500 blink'>⛔ OVERLOAD</span>"}document.querySelectorAll("input").forEach(e=>e.addEventListener("input",updateSim)),updateSim();
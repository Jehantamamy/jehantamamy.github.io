!function(){let e=window.location.hostname;if("localhost"===e||"127.0.0.1"===e||""===e){"file:"===window.location.protocol&&t();return}function t(){throw document.body.innerHTML=`
				<div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; background:#0f172a; color:white; font-family:sans-serif; text-align:center;">
					<h1 style="font-size:3rem; color:#ef4444;">⛔ AKSES DITOLAK</h1>
					<p style="font-size:1.2rem; margin-top:1rem;">Aplikasi ini dilindungi Hak Cipta dan hanya dapat digunakan melalui website resmi.</p>
					<a href="https://ariestechlab.com" style="margin-top:2rem; padding:10px 20px; background:#10b981; color:white; text-decoration:none; border-radius:8px; font-weight:bold;">Buka Aries Tech Labs</a>
				</div>
			`,Error("Illegal execution environment detected.")}["ariestechlab.com","www.ariestechlab.com"].includes(e)||t()}();const pdfjsLib=window["pdfjs-dist/build/pdf"];pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js";const bobotNilai={A:4,"A-":3.75,AB:3.5,"B+":3.25,B:3,"B-":2.75,BC:2.5,"C+":2.25,C:2,D:1,E:0},dropZone=document.getElementById("drop-zone"),fileInput=document.getElementById("pdf-upload"),mainContent=document.getElementById("main-content"),emptyState=document.getElementById("empty-state"),tbody=document.getElementById("table-body");let rowCount=0;function processFile(e){if(!e||"application/pdf"!==e.type){alert("Mohon unggah file PDF.");return}let t=new FileReader;t.onload=async function(){try{let e=await pdfjsLib.getDocument(new Uint8Array(this.result)).promise,t="";for(let o=1;o<=e.numPages;o++){let n=await e.getPage(o),a=await n.getTextContent();t+=a.items.map(e=>e.str).join("  ")+" \n"}parseData(t)}catch(r){alert("Gagal membaca PDF.")}},t.readAsArrayBuffer(e)}function parseData(e){let t=/(?!\bHalaman\b|\bPage\b)([A-Z][A-Z0-9\s\/\-\(\)]{7,})\s+([1-6])\s+([A-E][ABCDE+\-]?)/g,o=e.replace(/\n/g," "),n;for(;null!==(n=t.exec(o));)addTableRow(n[1].trim(),n[2],n[3],!1);showDashboard()}function addManualRow(){showDashboard(),addTableRow("Mata Kuliah Baru",3,"A",!0);let e=document.querySelector(".custom-scroll");e.scrollTop=e.scrollHeight}function addTableRow(e,t,o,n){rowCount++;let a=document.createElement("tr");a.className="hover:bg-slate-700/50 transition-colors group";let r=Object.keys(bobotNilai).map(e=>`<option value="${e}" ${e===o?"selected":""}>${e}</option>`).join(""),l=n?`<input type="number" min="1" max="6" value="${t}" class="sks-input w-12 bg-slate-900 border border-indigo-500/50 rounded p-1 text-center text-xs text-white focus:outline-none" onchange="hitungUlang()">`:`<span class="sks-static inline-block px-2 py-1 rounded bg-slate-700 text-xs font-mono">${t}</span><input type="hidden" value="${t}" class="sks-input">`,s=n?`<input type="text" value="${e}" class="w-full bg-transparent border-b border-dashed border-slate-600 focus:border-indigo-500 outline-none text-white font-bold" placeholder="Nama Matkul">`:`<span class="font-bold text-white max-w-xs truncate block" title="${e}">${e}</span>`;a.innerHTML=`
            <td class="p-4 border-b border-slate-700 font-mono text-slate-500">${rowCount}</td>
            <td class="p-4 border-b border-slate-700">${s}</td>
            <td class="p-4 border-b border-slate-700 text-center">${l}</td>
            <td class="p-4 border-b border-slate-700">
                <select class="select-nilai w-full bg-slate-900 border border-slate-600 text-white text-xs rounded p-2 focus:border-indigo-500 outline-none cursor-pointer" onchange="hitungUlang()">
                    ${r}
                </select>
            </td>
            <td class="p-4 border-b border-slate-700 text-center font-mono font-bold text-slate-400 poin-row">0</td>
            <td class="p-4 border-b border-slate-700 text-center">
                <button onclick="deleteRow(this)" class="text-slate-600 hover:text-rose-500 transition-colors" title="Hapus Baris">✕</button>
            </td>
        `,tbody.appendChild(a),hitungUlang()}function deleteRow(e){e.closest("tr").remove(),hitungUlang()}function resetData(){confirm("Hapus semua data?")&&(tbody.innerHTML="",rowCount=0,hitungUlang(),mainContent.classList.add("hidden"),emptyState.classList.remove("hidden"))}function showDashboard(){emptyState.classList.add("hidden"),mainContent.classList.remove("hidden")}function hitungUlang(){let e=0,t=0,o=document.querySelectorAll("#table-body tr");o.forEach((o,n)=>{o.querySelector("td:first-child").innerText=n+1;let a=o.querySelector(".sks-input").value,r=parseInt(a)||0,l=o.querySelector(".select-nilai"),s=l.value,i=bobotNilai[s]||0,d=r*i;o.querySelector(".poin-row").textContent=d.toFixed(1),["C","D","E","BC","C+"].includes(s)?l.className="select-nilai w-full bg-rose-900/30 border border-rose-500/50 text-rose-300 text-xs rounded p-2 focus:border-rose-500 outline-none cursor-pointer":l.className="select-nilai w-full bg-emerald-900/30 border border-emerald-500/50 text-emerald-300 text-xs rounded p-2 focus:border-emerald-500 outline-none cursor-pointer",e+=r,t+=d});let n=e>0?(t/e).toFixed(2):"0.00";document.getElementById("stat-ipk").innerText=n,document.getElementById("stat-sks").innerText=e,document.getElementById("stat-poin").innerText=t.toFixed(1);let a=Math.min(e/144*100,100);document.getElementById("sks-progress").style.width=a+"%";let r=document.getElementById("stat-ipk");parseFloat(n)>=3.5?r.className="text-4xl font-extrabold text-emerald-400":parseFloat(n)>=3?r.className="text-4xl font-extrabold text-indigo-400":r.className="text-4xl font-extrabold text-amber-400"}dropZone.addEventListener("dragover",e=>{e.preventDefault(),dropZone.classList.add("drag-active")}),dropZone.addEventListener("dragleave",()=>dropZone.classList.remove("drag-active")),dropZone.addEventListener("drop",e=>{e.preventDefault(),dropZone.classList.remove("drag-active"),e.dataTransfer.files.length&&processFile(e.dataTransfer.files[0])}),fileInput.addEventListener("change",e=>{e.target.files.length&&processFile(e.target.files[0])});